<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1380px" height="776px" viewBox="-0.5 -0.5 1380 776" style="background-color: rgb(255, 255, 255);"><defs><style type="text/css">@import url(https://fonts.googleapis.com/css2?family=Architects+Daughter:wght@400;500);&#xa;</style></defs><rect fill="#ffffff" width="100%" height="100%" x="0" y="0"/><g><g><rect x="605" y="0" width="150" height="30" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 15px; margin-left: 680px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: nowrap;">URL Shortener Design </div></div></div></foreignObject><text x="680" y="19" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">URL Shortener Design </text></switch></g></g><g><rect x="0" y="30" width="300" height="560" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 310px; margin-left: 2px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;"><b>Functional requirements: </b><div>1. Users should be able to type in long URL </div><div>    and get the short URL </div><div>2. When users type the short URL, they should</div><div>    be redirected to the long URL </div><div><br /></div><div><b>Non functional requirements: </b></div><div>1. System should be highly available </div><div>2. System should be scalable </div><div><br /></div><div><b>Back of the envelop estimations: </b></div><div>- Let us assume there are ~1million daily</div><div><span style="background-color: initial;">- Data to write on DB: </span><br /></div><div><span style="background-color: initial;"><span style="white-space: pre;">	</span>- long_url = 2000KB</span></div><div><span style="white-space: pre;">	</span>- short_url = 17KB<br /><span style="white-space: pre;">	</span>- timestamp = 7KB<br /></div><div><span style="white-space: pre;">	</span>- expire_date = 7KB</div><div><span style="white-space: pre;">	</span>TOTAL = 2031KB </div><div>In a day we will write to DB 2.31GB</div><div>And in 5 years 3.71TB </div><div><br /></div><div><b>Rest API endpoints:  </b> <br /></div><div>POST api/v1/data/short</div><div>{param: longURL}</div><div><br /></div><div>GET api/v1/shortURL</div><div>Returns shortURL </div><div><br /></div><div><b>URL redirects: </b></div><div>- 301: means that the request "Permanently" moved</div><div>to the long URL, and subsequent requests will not</div><div>be directed to the server, this is great if we want </div><div>to reduce the load on the server. </div><div><br /></div><div>- 302: means that the request "Temporarily" moved </div><div>to the long URL, and subsequent requests will be</div><div>directed to the server. This is great if want want </div><div>to count the click rate.  </div></div></div></div></foreignObject><text x="2" y="314" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">Functional requirements:...</text></switch></g></g><g><rect x="350" y="30" width="100" height="30" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 45px; margin-left: 400px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: nowrap;">Simple Design </div></div></div></foreignObject><text x="400" y="49" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">Simple Design </text></switch></g></g><g><rect x="780" y="70" width="600" height="250" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 195px; margin-left: 782px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">This design is shows a flow, which keeps checking if the short url exists in the DB or not. So, we need a <div>better alternative. <br /><div><br /></div></div><div><b>MD5 Hash</b></div><div>This is a great hashing algorithm which generates long string. However, if we want to limit the long string to </div><div>7 characters, then hash collision could occur, so this is not optimal.</div><div><br /></div><div><b>Base62</b></div><div>This is another hashing algorithm which uses 0-9, a-z, A-Z. So, 62<sup>7</sup> will give us trillions of combinations.</div><div>That is great right, and there's no hash collision. That is true for one server, but what if we have more servers</div><div>and our URL shortener needs to run in a distributed environment. Then in that case we out to run into hash</div><div>collision.</div><div><br /></div><div><b>Zookeeper + Base62</b></div><div>Zookeeper is a orchestration platform that is aware of all the servers in the systems. It assigns them an </div><div>identifier and keeps them synchronized. </div></div></div></div></foreignObject><text x="782" y="199" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">This design is shows a flow, which keeps checking if the short url exists in the DB or not. So, we n...</text></switch></g></g><g/><g><path d="M 389.4 89.7 L 401.5 89.7 Q 411.5 89.7 419.33 89.74 L 427.15 89.77" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 432.4 89.79 L 425.38 93.26 L 427.15 89.77 L 425.42 86.26 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g><g><ellipse cx="369.7" cy="89.7" rx="19.70149253731343" ry="19.70149253731343" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 37px; height: 1px; padding-top: 90px; margin-left: 351px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">User</div></div></div></foreignObject><text x="370" y="93" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">User</text></switch></g></g><g><path d="M 509.44 89.7 L 556.22 89.7" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 561.47 89.7 L 554.47 93.2 L 556.22 89.7 L 554.47 86.2 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g><g><rect x="433.52" y="76.57" width="75.93" height="26.27" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 74px; height: 1px; padding-top: 90px; margin-left: 435px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Long URL </div></div></div></foreignObject><text x="471" y="93" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Long URL </text></switch></g></g><g><path d="M 630.93 89.7 L 685.3 89.7" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 690.55 89.7 L 683.55 93.2 L 685.3 89.7 L 683.55 86.2 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g><g><rect x="562.59" y="76.57" width="68.33" height="26.27" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 66px; height: 1px; padding-top: 90px; margin-left: 564px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Hash f(x)</div></div></div></foreignObject><text x="597" y="93" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Hash f(x)</text></switch></g></g><g><path d="M 725.9 102.84 L 725.9 112.9 Q 725.9 122.9 725.9 129.41 L 725.9 135.93" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 725.9 141.18 L 722.4 134.18 L 725.9 135.93 L 729.4 134.18 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g><g><rect x="691.67" y="76.57" width="68.33" height="26.27" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 66px; height: 1px; padding-top: 90px; margin-left: 693px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">short URL</div></div></div></foreignObject><text x="726" y="93" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">short URL</text></switch></g></g><g><path d="M 725.9 194.72 L 725.9 204.71 Q 725.9 214.7 725.88 221.26 L 725.86 227.81" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 725.84 233.06 L 722.36 226.05 L 725.86 227.81 L 729.36 226.07 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g><g><path d="M 695.47 168.5 L 620.1 168.5 Q 610.1 168.5 600.1 168.5 L 531 168.51" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 525.75 168.51 L 532.75 165.01 L 531 168.51 L 532.75 172.01 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g><g><path d="M 725.83 142.24 L 756.2 168.51 L 725.83 194.78 L 695.46 168.51 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 59px; height: 1px; padding-top: 169px; margin-left: 696px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Exist in<div>DB</div></div></div></div></foreignObject><text x="726" y="172" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Exist in...</text></switch></g></g><g><path d="M 703.06 252.46 C 703.06 244.18 713.25 237.46 725.83 237.46 C 731.87 237.46 737.67 239.04 741.94 241.86 C 746.21 244.67 748.61 248.48 748.61 252.46 L 748.61 275 C 748.61 283.28 738.41 290 725.83 290 C 713.25 290 703.06 283.28 703.06 275 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 748.61 252.46 C 748.61 260.75 738.41 267.46 725.83 267.46 C 713.25 267.46 703.06 260.75 703.06 252.46" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 44px; height: 1px; padding-top: 276px; margin-left: 704px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">DB</div></div></div></foreignObject><text x="726" y="280" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">DB</text></switch></g></g><g><rect x="720" y="194.78" width="40" height="30" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 210px; margin-left: 740px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">No</div></div></div></foreignObject><text x="740" y="213" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">No</text></switch></g></g><g><path d="M 471.5 155.37 L 471.5 139.2 Q 471.5 129.2 471.5 119.2 L 471.5 109.2" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 471.5 103.95 L 475 110.95 L 471.5 109.2 L 468 110.95 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g><g><rect x="418.33" y="155.37" width="106.3" height="26.27" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 104px; height: 1px; padding-top: 169px; margin-left: 419px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Long URL + predefined String</div></div></div></foreignObject><text x="471" y="172" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Long URL + predefi...</text></switch></g></g><g><rect x="568.15" y="144.81" width="120" height="30" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 160px; margin-left: 628px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">Yes, hash collision</div></div></div></foreignObject><text x="628" y="163" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Yes, hash collision</text></switch></g></g><g><rect x="583" y="320" width="80" height="40" rx="6" ry="6" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 340px; margin-left: 584px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Apache<div>Zookeeper</div></div></div></div></foreignObject><text x="623" y="344" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Apache...</text></switch></g></g><g/><g><path d="M 423.74 527.1 L 437.1 527.1 Q 447.1 527.1 455.61 527.09 L 464.11 527.09" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 469.36 527.08 L 462.37 530.59 L 464.11 527.09 L 462.36 523.59 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g><g><ellipse cx="391.87" cy="527.08" rx="31.869688385269118" ry="30.279503105590063" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 62px; height: 1px; padding-top: 527px; margin-left: 361px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">User</div></div></div></foreignObject><text x="392" y="531" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">User</text></switch></g></g><g><path d="M 543.32 527.1 L 568.5 527.1 Q 578.5 527.1 588.5 527.09 L 607.37 527.08" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 612.62 527.08 L 605.62 530.59 L 607.37 527.08 L 605.62 523.59 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g><g><path d="M 470.97 544.49 L 477.98 504.31 C 478.24 503.45 479.19 502.86 480.25 502.92 L 534.67 502.92 C 535.57 503.02 536.29 503.57 536.5 504.31 L 542.86 544.49 C 543.32 547.48 541.98 550.45 539.79 551.3 L 473.75 551.3 C 471.67 550.29 470.48 547.37 470.97 544.49 Z M 491.57 535.69 L 499.97 535.69 C 500.29 535.69 500.58 535.48 500.73 535.14 C 500.89 534.8 500.89 534.38 500.73 534.04 C 500.58 533.7 500.29 533.49 499.97 533.49 L 495.59 533.49 L 504.65 524.32 L 504.65 542.65 L 501.8 539.72 C 501.4 539.21 500.66 539.13 500.16 539.54 C 499.65 539.94 499.57 540.68 499.97 541.19 L 505.89 547.05 L 511.66 541.19 C 512.07 540.68 511.98 539.94 511.48 539.54 C 510.97 539.13 510.24 539.21 509.84 539.72 L 507.06 542.29 L 507.06 524.32 L 516.04 533.34 L 512.25 533.34 C 511.56 533.34 511 533.9 511 534.59 C 511 535.28 511.56 535.83 512.25 535.83 L 520.36 535.83 L 520.36 527.7 C 520.36 527.03 519.82 526.49 519.15 526.49 C 518.48 526.49 517.94 527.03 517.94 527.7 L 517.94 531.8 L 507.06 521.02 L 507.06 515.31 C 508.74 514.72 509.75 512.99 509.46 511.23 C 509.16 509.47 507.64 508.18 505.85 508.18 C 504.07 508.18 502.55 509.47 502.25 511.23 C 501.95 512.99 502.97 514.72 504.65 515.31 L 504.65 521.02 L 494.06 531.58 L 494.06 527.7 C 494.06 527.01 493.5 526.45 492.81 526.45 C 492.13 526.45 491.57 527.01 491.57 527.7 Z" fill="#666666" stroke="none" pointer-events="all"/></g><g/><g><rect x="614.96" y="498.82" width="27.13" height="56.52" fill="none" stroke="none" pointer-events="all"/><path d="M 614.96 555.34 L 614.96 501.66 C 614.96 500.09 616.21 498.82 617.75 498.82 L 639.3 498.82 C 640.84 498.82 642.09 500.09 642.09 501.66 L 642.09 555.34 Z M 619.03 549.78 L 638.01 549.78 L 638.01 547.06 L 619.03 547.06 Z M 638.01 544.33 L 638.01 541.55 L 619.03 541.55 L 619.03 544.33 Z M 619.03 509.89 L 638.01 509.89 L 638.01 507.11 L 619.03 507.11 Z" fill="#333333" stroke="none" pointer-events="all"/></g><g><rect x="600.51" y="551.3" width="70" height="30" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 566px; margin-left: 636px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">Server 2</div></div></div></foreignObject><text x="636" y="570" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Server 2</text></switch></g></g><g><rect x="597.96" y="460.87" width="70" height="30" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 476px; margin-left: 633px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">Server 1</div></div></div></foreignObject><text x="633" y="479" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Server 1</text></switch></g></g><g><rect x="613.43" y="410" width="27.13" height="56.52" fill="none" stroke="none" pointer-events="all"/><path d="M 613.43 466.52 L 613.43 412.84 C 613.43 411.27 614.68 410 616.22 410 L 637.77 410 C 639.31 410 640.56 411.27 640.56 412.84 L 640.56 466.52 Z M 617.5 460.96 L 636.48 460.96 L 636.48 458.24 L 617.5 458.24 Z M 636.48 455.51 L 636.48 452.73 L 617.5 452.73 L 617.5 455.51 Z M 617.5 421.07 L 636.48 421.07 L 636.48 418.29 L 617.5 418.29 Z" fill="#333333" stroke="none" pointer-events="all"/></g><g><rect x="615.98" y="595.71" width="27.13" height="56.52" fill="none" stroke="none" pointer-events="all"/><path d="M 615.98 652.24 L 615.98 598.55 C 615.98 596.98 617.23 595.71 618.77 595.71 L 640.32 595.71 C 641.86 595.71 643.11 596.98 643.11 598.55 L 643.11 652.24 Z M 620.05 646.67 L 639.03 646.67 L 639.03 643.95 L 620.05 643.95 Z M 639.03 641.23 L 639.03 638.45 L 620.05 638.45 L 620.05 641.23 Z M 620.05 606.78 L 639.03 606.78 L 639.03 604 L 620.05 604 Z" fill="#333333" stroke="none" pointer-events="all"/></g><g><rect x="600.51" y="645.78" width="70" height="30" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 661px; margin-left: 636px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">Server 3</div></div></div></foreignObject><text x="636" y="664" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Server 3</text></switch></g></g><g><path d="M 543.32 526.27 L 609.46 443.24" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 612.73 439.14 L 611.11 446.79 L 609.46 443.24 L 605.63 442.43 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g><g><path d="M 543.49 526.27 L 612.18 618.86" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 615.31 623.08 L 608.33 619.54 L 612.18 618.86 L 613.95 615.37 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g><g><path d="M 626.99 410 L 627 366.37" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 627 361.12 L 630.5 368.12 L 627 366.37 L 623.5 368.12 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g><g><path d="M 614.73 775 C 609.77 775 606 770.91 606 766.38 L 606 730.65 C 606 725.88 610 722 614.51 722 L 647.9 722 C 652.24 722 656.48 725.55 656.48 730.95 L 656.48 766.24 C 656.48 771.26 652.53 775 647.8 775 Z" fill="#2e73b8" stroke="none" pointer-events="all"/><path d="M 648.04 772.69 C 652.46 772.69 656.48 768.78 656.48 764.09 L 656.48 766.24 C 656.48 771.28 652.52 775 647.8 775 L 614.73 775 C 609.78 775 606 770.89 606 766.38 L 606 764.07 C 606 768.65 609.77 772.69 614.71 772.69 Z" fill-opacity="0.3" fill="#000000" stroke="none" pointer-events="all"/><rect x="606" y="722" width="0" height="0" fill="none" stroke="rgb(0, 0, 0)" pointer-events="all"/><path d="M 619.33 735.1 C 619.37 736.62 619 737.87 617.99 738.6 C 617.11 739.23 615.45 739.3 614.37 738.77 C 613.11 738.1 612.77 736.63 612.63 735.18 C 612.53 733.72 612.54 731.73 612.89 730.41 C 613.33 728.88 614.2 728.31 615.12 728.11 C 616.2 727.92 617.62 728 618.47 728.79 C 619.18 729.46 619.37 730.44 619.33 731.55 L 617.63 731.55 C 617.63 731.25 617.63 730.75 617.45 730.23 C 617.27 729.78 616.92 729.27 616.16 729.26 C 615.24 729.26 614.84 729.63 614.57 730.51 C 614.27 731.58 614.27 732.93 614.29 734.08 C 614.32 735.43 614.47 736.4 614.76 736.99 C 615.1 737.73 616.03 738.02 616.83 737.59 C 617.41 737.27 617.72 736.4 617.72 735.1 Z M 624.76 734.91 L 623.53 729.64 L 622.28 734.91 Z M 627.53 738.93 L 625.7 738.93 L 625.04 736.34 L 621.91 736.34 L 621.25 738.93 L 619.43 738.93 L 622.57 728.21 L 624.76 728.21 Z M 634.76 735.1 C 634.79 736.02 634.62 737.22 634.03 737.98 C 633.55 738.66 632.64 739.26 631.04 739.11 C 629.84 739 628.88 738.44 628.4 736.99 C 628.13 736.12 627.94 734.82 628 732.83 C 628.05 731.15 628.36 729.83 628.95 729.08 C 629.73 728.08 630.94 727.97 631.96 728.05 C 633.11 728.1 633.94 728.63 634.31 729.31 C 634.72 730.01 634.78 730.8 634.76 731.55 L 633.04 731.55 C 633.06 731.01 633.02 730.42 632.71 729.9 C 632.47 729.5 632.07 729.19 631.25 729.27 C 630.58 729.35 630.19 729.76 629.94 730.65 C 629.73 731.57 629.69 732.75 629.73 734.54 C 629.81 735.87 629.98 736.92 630.49 737.43 C 631.06 737.92 632.27 738 632.76 737.04 C 633.03 736.58 633.14 735.94 633.14 735.1 Z M 642.56 738.93 L 640.85 738.93 L 640.85 734 L 637.72 734 L 637.72 738.93 L 635.99 738.93 L 635.99 728.21 L 637.72 728.21 L 637.72 732.56 L 640.85 732.56 L 640.85 728.21 L 642.56 728.21 Z M 644.23 738.93 L 644.23 728.21 L 650.04 728.21 L 650.04 729.65 L 645.9 729.65 L 645.9 732.56 L 649.71 732.56 L 649.71 734 L 645.9 734 L 645.9 737.49 L 650.04 737.49 L 650.04 738.93 Z" fill="#ffffff" stroke="none" pointer-events="all"/></g><g><path d="M 630.26 676.44 L 630.04 713.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 630.01 718.88 L 626.55 711.86 L 630.04 713.63 L 633.55 711.9 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g><g><path d="M 642.09 527.1 L 701.1 527.1 Q 711.1 527.1 721.1 527.09 L 773.63 527.01" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 778.88 527 L 771.89 530.51 L 773.63 527.01 L 771.88 523.51 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g><g><path d="M 832.5 554.66 C 832.5 558.71 820.75 562 806.25 562 C 791.75 562 780 558.71 780 554.66 L 780 499.34 C 780 495.29 791.75 492 806.25 492 C 820.75 492 832.5 495.29 832.5 499.34 Z M 826.79 501.13 C 826.79 498.35 817.83 496.1 806.79 496.1 C 795.74 496.1 786.79 498.35 786.79 501.13 C 786.79 503.91 795.74 506.16 806.79 506.16 C 817.83 506.16 826.79 503.91 826.79 501.13 Z M 799.64 542.45 C 803.51 540.78 806.01 537.05 806.01 532.93 C 806.01 528.81 803.51 525.08 799.64 523.41 L 788.93 523.41 L 788.93 542.45 Z M 822.5 542.45 C 824.54 541.58 825.84 539.53 825.76 537.3 C 825.68 535.06 824.24 533.11 822.14 532.39 C 823.5 531.11 824.1 529.23 823.73 527.4 C 823.37 525.57 822.09 524.06 820.36 523.41 L 810.36 523.41 L 810.36 542.45 Z M 791.43 525.92 L 799.29 525.92 C 801.88 527.28 803.51 529.98 803.51 532.93 C 803.51 535.87 801.88 538.57 799.29 539.93 L 791.43 539.93 Z M 812.86 525.92 L 819.64 525.92 C 820.54 526.52 821.08 527.53 821.08 528.62 C 821.08 529.7 820.54 530.71 819.64 531.31 L 812.86 531.31 Z M 812.86 534.54 L 820 534.54 C 821.58 534.35 823.02 535.47 823.21 537.06 C 823.41 538.65 822.29 540.09 820.71 540.29 L 812.86 540.29 Z Z" fill="#000000" stroke="none" pointer-events="all"/></g><g><path d="M 640 440 L 772.52 512.4" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 777.13 514.91 L 769.31 514.63 L 772.52 512.4 L 772.66 508.49 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g><g><path d="M 640 630 L 771.8 542.97" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 776.18 540.08 L 772.27 546.85 L 771.8 542.97 L 768.41 541.01 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g><g><rect x="900" y="360" width="90" height="30" fill="#f8cecc" stroke="#b85450" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 375px; margin-left: 945px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">Final Design </div></div></div></foreignObject><text x="945" y="379" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Final Design </text></switch></g></g><g><rect x="900" y="405" width="400" height="240" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 525px; margin-left: 902px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">1. Make a post/get request <div>2. It hits the load balancer which balances the traffic request.</div><div>3. Each server has a counter ranges that is getting it from the Zookeepr</div><div>4. The counter is used to generate the hash function and avoid hash</div><div>    collision in distributed environment </div><div>5. The ranges the zookeepr keeps are like this: </div><div>     server1 = 1K to 5K </div><div>     server2 = 5K to 10K</div><div>     server 3 = 10K to 15K </div><div>     - If we scale horizontally we will assign the new server a new range</div><div>     - If we downscale and remove one of the servers, that range will also</div><div>       be removed </div><div>6. After generating the hash, the servers will check the cash if this </div><div>    hash exists. If it exists it will return the short url, and if not</div><div>    it will save it in the NO SQL DB. </div><div><br /></div></div></div></div></foreignObject><text x="902" y="529" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">1. Make a post/get request...</text></switch></g></g></g></svg>